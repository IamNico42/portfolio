---
created:
  - "{{date: DD-MM-YYYY}} {{time}}"
aliases:
  - "Course Code:"
  - Betriebssysteme
tags:
  - Course/
---
# **Memory API (Speicherverwaltung in C)**

---

### üìö **1Ô∏è‚É£ Speicherallokation in C**

Die Speicherverwaltung in C kann entweder √ºber **den Stack oder den Heap** erfolgen.

‚úÖ **Stack (Automatische Speicherverwaltung)**

- Speicher f√ºr lokale Variablen wird automatisch reserviert und freigegeben.
- Beispiel:
    
    ```c
	void func() { 
	    int x = 3;  // Speicher wird automatisch auf dem Stack reserviert
	}
    ```
    

‚úÖ **Heap (Manuelle Speicherverwaltung mit malloc/free)**

- Speicher wird **explizit** mit `malloc()` angefordert und mit `free()` freigegeben.
- Beispiel:
    
    ```c
	int *x = malloc(sizeof(int) * 4);  // Speicherblock f√ºr 4 Ganzzahlen
	free(x);  // Freigabe des Speichers

    ```
    

---

### ‚ö†Ô∏è **2Ô∏è‚É£ H√§ufige Fehler bei der Speicherverwaltung**

‚ùå **Vergessen, Speicher zu allokieren**

```c
	int *x = malloc(sizeof(int) * 4);  // Speicherblock f√ºr 4 Ganzzahlen
	free(x);  // Freigabe des Speichers
```

‚úÖ **Korrekt:**

```c
	char *dst = malloc(strlen("hello") + 1);
	strcpy(dst, "hello");

```

‚ùå **Nicht gen√ºgend Speicher allokiert**

```c
	char *dst = malloc(strlen("hello"));  // ‚ùå Kein Platz f√ºr das Null-Terminierungszeichen!
```

‚úÖ **Korrekt:**

```c
	char *dst = malloc(strlen("hello"));  // ‚ùå Kein Platz f√ºr das Null-Terminierungszeichen!
```

‚ùå **Vergessen, Speicher freizugeben (Memory Leak)**

```c
	int *x = malloc(sizeof(int) * 4);
// ‚ùå Falls free(x) nicht aufgerufen wird, bleibt der Speicher belegt!

```

‚úÖ **Korrekt:**

```c
	free(x);
```

---

### üõ†Ô∏è **3Ô∏è‚É£ Erweiterte Speicherfunktionen**

- **`realloc()`** - Erweitert oder verkleinert einen bereits allokierten Speicherbereich.
    
  ```c
	int *x = malloc(4 * sizeof(int));
	x = realloc(x, 8 * sizeof(int));  // Gr√∂√üe verdoppeln
	```
    
- **`mmap()`** - Direktes Mapping von Speicherbereichen.
    
```c
	void *ptr = mmap(NULL, 4096, PROT_READ | PROT_WRITE, MAP_PRIVATE | MAP_ANONYMOUS, -1, 0);
```
    
